<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11. Analysis: other options &mdash; MDANSE 1.5.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12. Using MDANSE from command line" href="cmd.html" />
    <link rel="prev" title="10. Analysis: Structure" href="structure.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MDANSE
            <img src="../_static/mdanse_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">MDANSE User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="opening.html">1. MDANSE User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">2. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">3. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">4. Installing MDANSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">5. Building MDANSE from source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">6. Input and output files</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">7. Using MDANSE Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamics.html">8. Analysis: Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="scattering.html">9. Analysis: Scattering</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">10. Analysis: Structure</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. Analysis: other options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#infrared">11.1. Infrared</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dipole-autocorrelation-function">11.1.1. Dipole AutoCorrelation Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#macromolecules">11.2. Macromolecules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#refolded-membrane-trajectory">11.2.1. Refolded Membrane Trajectory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#thermodynamics">11.3. Thermodynamics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#density">11.3.1. Density</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temperature">11.3.2. Temperature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#trajectory">11.4. Trajectory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#box-translated-trajectory">11.4.1. Box Translated Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#center-of-masses-trajectory">11.4.2. Center Of Masses Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cropped-trajectory">11.4.3. Cropped Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-motion-filtered-trajectory">11.4.4. Global Motion Filtered Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rigid-body-trajectory">11.4.5. Rigid Body Trajectory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unfolded-trajectory">11.4.6. Unfolded Trajectory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-instruments">11.5. Virtual Instruments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mcstas-virtual-instrument">11.5.1. McStas Virtual Instrument</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous">11.5.1.1. Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-info">11.6. Data info</a></li>
<li class="toctree-l2"><a class="reference internal" href="#animation">11.7. Animation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#density-superposition">11.8. Density Superposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trajectory-viewer">11.9. Trajectory Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-3d-plotter">11.10. 2D/3D Plotter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#molecular-viewer">11.11. Molecular Viewer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cmd.html">12. Using MDANSE from command line</a></li>
<li class="toctree-l1"><a class="reference internal" href="trajectory.html">13. Trajectory Converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">14. Plotting Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html#units">15. Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">16. Glossary of Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">17. References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MDANSE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">11. </span>Analysis: other options</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/analysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="analysis-other-options">
<h1><span class="section-number">11. </span>Analysis: other options<a class="headerlink" href="#analysis-other-options" title="Permalink to this heading"></a></h1>
<section id="infrared">
<h2><span class="section-number">11.1. </span>Infrared<a class="headerlink" href="#infrared" title="Permalink to this heading"></a></h2>
<section id="dipole-autocorrelation-function">
<h3><span class="section-number">11.1.1. </span>Dipole AutoCorrelation Function<a class="headerlink" href="#dipole-autocorrelation-function" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/10000001000003200000022889DD21920219B434.png"><img alt="../_images/10000001000003200000022889DD21920219B434.png" src="../_images/10000001000003200000022889DD21920219B434.png" style="width: 15.921cm; height: 10.986cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Atom_Charges_1">atom charges</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
</section>
<section id="macromolecules">
<h2><span class="section-number">11.2. </span>Macromolecules<a class="headerlink" href="#macromolecules" title="Permalink to this heading"></a></h2>
<p>This section has one subsection, Lipids, which contains following
Plugins:</p>
<ul class="simple">
<li><p>Refolded Membrane Trajectory</p></li>
</ul>
<section id="refolded-membrane-trajectory">
<h3><span class="section-number">11.2.1. </span>Refolded Membrane Trajectory<a class="headerlink" href="#refolded-membrane-trajectory" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000032200000202AC02A063F408C4F9.png"><img alt="../_images/100000010000032200000202AC02A063F408C4F9.png" src="../_images/100000010000032200000202AC02A063F408C4F9.png" style="width: 15.921cm; height: 10.204cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><strong>membrane axis</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> c</p>
<p><em>Description:</em> the axis along which is used for the trajectory
manipulation, the normal to the membrane.</p>
<ul class="simple">
<li><p><strong>name of the lipid of the upper leaflet</strong></p></li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> DMPC</p>
<p><em>Description:</em> the name of the lipid positioned in the upper leaflet of
the membrane. It will be repositioned into the upper part of the
simulation box. The name must be the name with which MMTK refers to the
lipid.</p>
<ul class="simple">
<li><p><strong>name of the lipid of the lower leaflet</strong></p></li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> DMPC</p>
<p><em>Description:</em> the name of the lipid positioned in the lower leaflet of
the membrane. It will be repositioned into the lower part of the
simulation box. The name must be the name with which MMTK refers to the
lipid.</p>
<ul class="simple">
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
</ul>
</section>
</section>
<section id="thermodynamics">
<h2><span class="section-number">11.3. </span>Thermodynamics<a class="headerlink" href="#thermodynamics" title="Permalink to this heading"></a></h2>
<p>This section contains the following Plugins:</p>
<ul class="simple">
<li><p><a class="reference external" href="#_Density">Density</a></p></li>
<li><p><a class="reference external" href="#_Temperature">Temperature</a></p></li>
</ul>
<section id="density">
<h3><span class="section-number">11.3.1. </span>Density<a class="headerlink" href="#density" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/1000000100000320000001955616A0F8950ADF86.png"><img alt="../_images/1000000100000320000001955616A0F8950ADF86.png" src="../_images/1000000100000320000001955616A0F8950ADF86.png" style="width: 15.921cm; height: 8.059cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="temperature">
<h3><span class="section-number">11.3.2. </span>Temperature<a class="headerlink" href="#temperature" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/10000001000003220000017A08B3789C04716632.png"><img alt="../_images/10000001000003220000017A08B3789C04716632.png" src="../_images/10000001000003220000017A08B3789C04716632.png" style="width: 15.921cm; height: 7.504cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Interpolation_order">interpolation order</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
</section>
<section id="trajectory">
<h2><span class="section-number">11.4. </span>Trajectory<a class="headerlink" href="#trajectory" title="Permalink to this heading"></a></h2>
<p>The Plugins within this section are listed below. They are used to
adjust the trajectory in some way.</p>
<ul class="simple">
<li><p><a class="reference external" href="#_Box_Translated_Trajectory">Box Translated Trajectory</a></p></li>
<li><p><a class="reference external" href="#_Center_Of_Masses">Centre Of Masses Trajectory</a></p></li>
<li><p><a class="reference external" href="#_Cropped_Trajectory">Cropped Trajectory</a></p></li>
<li><p><a class="reference external" href="#_Global_Motion_Filtered">Global Motion Filtered Trajectory</a></p></li>
<li><p><a class="reference external" href="#_Rigid_Body_Trajectory">Rigid Body Trajectory</a></p></li>
<li><p><a class="reference external" href="#_Unfolded_Trajectory">Unfolded Trajectory</a></p></li>
</ul>
<section id="box-translated-trajectory">
<h3><span class="section-number">11.4.1. </span>Box Translated Trajectory<a class="headerlink" href="#box-translated-trajectory" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000032000000182CFECE57E69B1E015.png"><img alt="../_images/100000010000032000000182CFECE57E69B1E015.png" src="../_images/100000010000032000000182CFECE57E69B1E015.png" style="width: 15.921cm; height: 7.682cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="center-of-masses-trajectory">
<h3><span class="section-number">11.4.2. </span>Center Of Masses Trajectory<a class="headerlink" href="#center-of-masses-trajectory" title="Permalink to this heading"></a></h3>
<p id="theory-and-implementation-16">Theory and implementation</p>
<p>The Center Of Mass Trajectory (<em>COMT</em>) analysis consists in deriving the
trajectory of the respective centres of mass of a set of groups of
atoms. In order to produce a visualizable trajectory, <em>MDANSE</em> assigns
the centres of mass to pseudo-hydrogen atoms whose mass is equal to the
mass of their associated group. Thus, the produced trajectory can be
reused for other analysis. In that sense, <em>COMT</em> analysis is a practical
way to reduce noticeably the dimensionality of a system.</p>
<p id="gui-16">GUI</p>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/1000000100000324000001CE931274740DA7326D.png"><img alt="../_images/1000000100000324000001CE931274740DA7326D.png" src="../_images/1000000100000324000001CE931274740DA7326D.png" style="width: 15.921cm; height: 9.148cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Group_coordinates_by">Group coordinates by</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="cropped-trajectory">
<h3><span class="section-number">11.4.3. </span>Cropped Trajectory<a class="headerlink" href="#cropped-trajectory" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000031E00000186B928A6B653B00BF5.png"><img alt="../_images/100000010000031E00000186B928A6B653B00BF5.png" src="../_images/100000010000031E00000186B928A6B653B00BF5.png" style="width: 15.921cm; height: 7.781cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="global-motion-filtered-trajectory">
<h3><span class="section-number">11.4.4. </span>Global Motion Filtered Trajectory<a class="headerlink" href="#global-motion-filtered-trajectory" title="Permalink to this heading"></a></h3>
<p id="theory-and-implementation-17">Theory and implementation</p>
<p>It is often of interest to separate global motion from internal motion,
both for quantitative analysis and for visualization by animated
display. Obviously, this can be done under the hypothesis that global
and internal motions are decoupled within the length and timescales of
the analysis. <em>MDANSE</em> can create Global Motion Filtered Trajectory
(<em>GMFT</em>) by filtering out global motions (made of the three
translational and rotational degrees of freedom), either on the whole
system or on a user-defined subset, by fitting it to a reference
structure (usually the first frame of the <em>MD</em>). Global motion filtering
uses a straightforward algorithm:</p>
<ul class="simple">
<li><p>for the first frame, find the linear transformation such that the
coordinate origin becomes the centre of mass of the system and its
principal axes of inertia are parallel to the three coordinates axes
(also called principal axes transformation),</p></li>
<li><p>this provides a reference configuration C<sub>ref</sub>,</p></li>
<li><p>for any other frames <em>f</em>, finds and applies the linear transformation
that minimizes the RMS distance between frame <em>f</em> and C<sub>ref</sub>.</p></li>
</ul>
<p>The result is stored in a new trajectory file that contains only
internal motions. This analysis can be useful in case where diffusive
motions are not of interest or simply not accessible to the experiment
(time resolution, powder analysis … ).</p>
<p id="gui-17">GUI</p>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/1000000100000322000002196544DE20D17020BF.png"><img alt="../_images/1000000100000322000002196544DE20D17020BF.png" src="../_images/1000000100000322000002196544DE20D17020BF.png" style="width: 15.921cm; height: 10.661cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><strong>reference basis</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> None</p>
<p><em>Description:</em> can be used exactly like <a class="reference external" href="#_Axis_Selection_1">Axis
Selection</a>. &lt;insert&gt; what it does</p>
<ul class="simple">
<li><p><strong>Make the chemical object contiguous</strong></p></li>
</ul>
<p><em>Format:</em> bool</p>
<p><em>Default:</em> False</p>
<p><em>Description:</em> makes the configuration contiguous. This is done via MMTK
universe’s contiguousObjectConfiguration() method.</p>
<ul class="simple">
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="rigid-body-trajectory">
<h3><span class="section-number">11.4.5. </span>Rigid Body Trajectory<a class="headerlink" href="#rigid-body-trajectory" title="Permalink to this heading"></a></h3>
<p id="theory-and-implementation-18">Theory and implementation</p>
<p>To analyse the dynamics of complex molecular systems it is often
desirable to consider the overall motion of molecules or molecular
subunits. We will call this motion rigid-body motion in the following.
Rigid-body motions are fully determined by the dynamics of the centroid,
which may be the centre-of-mass, and the dynamics of the angular
coordinates describing the orientation of the rigid body. The angular
coordinates are the appropriate variables to compute angular correlation
functions of molecular systems in space and time. In most cases,
however, these variables are not directly available from <em>MD</em>
simulations since <em>MD</em> algorithms typically work in cartesian
coordinates. Molecules are either treated as flexible, or, if they are
treated as rigid, constraints are taken into account in the framework of
cartesian coordinates [<a class="reference external" href="#SignetBibliographie_023">23</a>]. In <em>MDANSE</em>,
Rigid-Body Trajectory (<em>RBT</em>) can be defined from a <em>MD</em> trajectory by
fitting rigid reference structures, defining a (sub)molecule, to the
corresponding structure in each time frame of the trajectory. Here ‘fit’
means the optimal superposition of the structures in a least-squares
sense. We will describe now how rigid body motions, i.e. global
translations and rotations of molecules or subunits of complex
molecules, can be extracted from a <em>MD</em> trajectory. A more detailed
presentation is given in [<a class="reference external" href="#SignetBibliographie_024">24</a>]. We define
an optimal rigid-body trajectory in the following way: for each time
frame of the trajectory the atomic positions of a rigid reference
structure, defined by the three cartesian components of its centroid
(e.g. the centre of mass) and three angles, are as close as possible to
the atomic positions of the corresponding structure in the <em>MD</em>
configuration. Here ‘as close as possible’ means as close as possible in
a least-squares sense.</p>
<p><strong>Optimal superposition.</strong> We consider a given time frame in which the
atomic positions of a (sub)molecule are given by</p>
<div class="math" id="equation-pfx145">
<p><span class="eqno">(11.1)<a class="headerlink" href="#equation-pfx145" title="Permalink to this equation"></a></span><img src="../_images/math/762a41572aceddc99b02aaedd5f3e27832c73dab.png" alt="{x_{\alpha},{\alpha = 1}\ldots N}"/></p>
</div><p>. The corresponding positions in the reference structure are denoted as</p>
<div class="math" id="equation-pfx146">
<p><span class="eqno">(11.2)<a class="headerlink" href="#equation-pfx146" title="Permalink to this equation"></a></span><img src="../_images/math/bae3506fd09ad752963f8a4ead173462576de569.png" alt="{x_{\alpha}^{(0)},{\alpha = 1}\ldots N}"/></p>
</div><p>. For both the given structure and the reference structure we introduce
the yet undetermined centroids X and X<sup>(0)</sup>, respectively, and
define the deviation</p>
<div class="math" id="equation-pfx147">
<p><span class="eqno">(11.3)<a class="headerlink" href="#equation-pfx147" title="Permalink to this equation"></a></span><img src="../_images/math/4c6cf8a81fef8c4a33fbc542d92ffd157884ac15.png" alt="{\Delta_{\alpha}\doteq D(q){\left\lbrack {x_{\alpha}^{(0)} - X^{(0)}} \right\rbrack - \left\lbrack {x_{\alpha} - X} \right\rbrack}.}"/></p>
</div><p>Here <strong>D(q)</strong> is a rotation matrix which depends on also yet
undetermined angular coordinates which we chose to be <em>quaternion
parameters</em>, abbreviated as vector <strong>q</strong> = (q<sub>0</sub>, q<sub>1</sub>,
q<sub>2</sub>, q<sub>3</sub>). The quaternion parameters fulfil the
normalization condition</p>
<div class="math" id="equation-pfx148">
<p><span class="eqno">(11.4)<a class="headerlink" href="#equation-pfx148" title="Permalink to this equation"></a></span><img src="../_images/math/fcde3dc00a8e9523c285c648084298f97d64bea6.png" alt="{q \dot {q = 1}}"/></p>
</div><p>[<a class="reference external" href="#SignetBibliographie_025">25</a>]. The target function to be
minimized is now defined as</p>
<div class="math" id="equation-pfx149">
<p><span class="eqno">(11.5)<a class="headerlink" href="#equation-pfx149" title="Permalink to this equation"></a></span><img src="../_images/math/f42cd36fb75ece13e2bd098130ea32acdde83e4e.png" alt="{m{\left( {q;X,X^{(0)}} \right) = {\sum\limits_{\alpha}{\omega_{\alpha}|\Delta|_{\alpha}^{2}}}}.}"/></p>
</div><p>where <img class="math" src="../_images/math/efe7e7aeecaf0956359232cd0f90cfcb1f8d5e71.png" alt="\omega_{\alpha}"/> are atomic weights (see Section ??). The minimization
with respect to the centroids is decoupled from the minimization with
respect to the quaternion parameters and yields</p>
<div class="math" id="equation-pfx150">
<p><span class="eqno">(11.6)<a class="headerlink" href="#equation-pfx150" title="Permalink to this equation"></a></span><img src="../_images/math/2c64915c6e85fe0ec35109c4fecb4317ab6e0e00.png" alt="{{X = {\sum\limits_{\alpha}\omega_{\alpha}}}x_{\alpha},}"/></p>
</div><div class="math" id="equation-pfx151">
<p><span class="eqno">(11.7)<a class="headerlink" href="#equation-pfx151" title="Permalink to this equation"></a></span><img src="../_images/math/9350c59f119fd24bd7d241a6c1e79f0f59d458f2.png" alt="{{X^{(0)} = {\sum\limits_{\alpha}\omega_{\alpha}}}x_{\alpha}^{(0)}.}"/></p>
</div><p>We are now left with a minimization problem for the rotational part
which can be written as</p>
<div class="math" id="equation-pfx152">
<p><span class="eqno">(11.8)<a class="headerlink" href="#equation-pfx152" title="Permalink to this equation"></a></span><img src="../_images/math/fc7974d8d112a0e200ef51341d619978e8701747.png" alt="m{(q) = {\sum\limits_{\alpha}{\omega_{\alpha}\left\lbrack {{D(q)r}_{\alpha}^{(0)} - r_{\alpha}} \right\rbrack^{2}}}\overset{!}{=}\mathit{Min}}."/></p>
</div><p>The relative position vectors</p>
<div class="math" id="equation-pfx153">
<p><span class="eqno">(11.9)<a class="headerlink" href="#equation-pfx153" title="Permalink to this equation"></a></span><img src="../_images/math/2841cd3c5eadc017fdb605c754c99082f2b87c0b.png" alt="{{r_{\alpha} = {x_{\alpha} - X}},}"/></p>
</div><div class="math" id="equation-pfx154">
<p><span class="eqno">(11.10)<a class="headerlink" href="#equation-pfx154" title="Permalink to this equation"></a></span><img src="../_images/math/abda0315f72e4b53eef703be9d4d17a5d2960b2f.png" alt="{r_{\alpha}^{(0)} = {x_{\alpha}^{(0)} - X^{(0)}}}"/></p>
</div><p>are fixed and the rotation matrix reads
[<a class="reference external" href="#SignetBibliographie_025">25</a>]</p>
<div class="math" id="equation-pfx155">
<p><span class="eqno">(11.11)<a class="headerlink" href="#equation-pfx155" title="Permalink to this equation"></a></span><img src="../_images/math/f76310bf9e709ef6100c397f32d29f69eda1369a.png" alt="D(q) = \begin{matrix}
{q_{0}^{2} + q_{1}^{2} - q_{2}^{2} - q_{3}^{2}} &amp; {2\left( {{- q_{0}}{q_{3} + q_{1}}q_{2}} \right)} &amp; {2\left( {q_{0}{q_{2} + q_{1}}q_{3}} \right)} \\
{2\left( {q_{0}{q_{3} + q_{1}}q_{2}} \right)} &amp; {q_{0}^{2} + q_{2}^{2} - q_{1}^{2} - q_{3}^{2}} &amp; {2\left( {{- q_{0}}{q_{1} + q_{2}}q_{3}} \right)} \\
{2\left( {{- q_{0}}{q_{2} + q_{1}}q_{3}} \right)} &amp; {2\left( {q_{0}{q_{1} + q_{2}}q_{3}} \right)} &amp; {q_{0}^{2} + q_{3}^{2} - q_{1}^{2} - q_{2}^{2}} \\
\end{matrix}"/></p>
</div><p><strong>Quaternions and rotations.</strong> The rotational minimization problem can
be elegantly solved by using quaternion algebra. Quaternions are
so-called hypercomplex numbers, having a real unit, 1, and three
imaginary units, <strong>I</strong>, <strong>J</strong>, and <strong>K</strong>. Since <strong>IJ</strong> = <strong>K</strong> (cyclic),
quaternion multiplication is not commutative. A possible matrix
representation of an arbitrary quaternion,</p>
<div class="math" id="equation-pfx156">
<p><span class="eqno">(11.12)<a class="headerlink" href="#equation-pfx156" title="Permalink to this equation"></a></span><img src="../_images/math/0af837aff2151fb3b98842d03f0ef2f6e3b9765b.png" alt="{{A = a_{0}}\cdot{1 + a_{1}}\cdot{I + a_{2}}\cdot{J + a_{3}}\cdot K,}"/></p>
</div><p>reads</p>
<div class="math" id="equation-pfx157">
<p><span class="eqno">(11.13)<a class="headerlink" href="#equation-pfx157" title="Permalink to this equation"></a></span><img src="../_images/math/7f54fe325fa1adf8f1dfaeda47bccd928ce70c42.png" alt="A = \begin{matrix}
a_{0} &amp; {- a_{1}} &amp; {- a_{2}} &amp; {- a_{3}} \\
a_{1} &amp; a_{0} &amp; {- a_{3}} &amp; a_{2} \\
a_{2} &amp; a_{3} &amp; a_{0} &amp; {- a_{1}} \\
a_{3} &amp; {- a_{2}} &amp; a_{1} &amp; a_{0} \\
\end{matrix}"/></p>
</div><p>The components <img class="math" src="../_images/math/25b2ea85f82cbd86fd81fd7e119ab0568aca1603.png" alt="a_{\upsilon}"/>
are real numbers. Similarly, as normal complex numbers allow one to
represent rotations in a plane, quaternions allow one to represent
rotations in space. Consider the quaternion representation of a vector
r, which is given by</p>
<div class="math" id="equation-pfx158">
<p><span class="eqno">(11.14)<a class="headerlink" href="#equation-pfx158" title="Permalink to this equation"></a></span><img src="../_images/math/bbc6b31763f0ae59a66914ad9ffe5a3717dbdb60.png" alt="{{R = x}\cdot{I + y}\cdot{J + z}\cdot K,}"/></p>
</div><p>and perform the operation</p>
<div class="math" id="equation-pfx159">
<p><span class="eqno">(11.15)<a class="headerlink" href="#equation-pfx159" title="Permalink to this equation"></a></span><img src="../_images/math/142b6c0ceca4ff64f6363e5db958b13fe60b2872.png" alt="{{R^{'} = \mathit{QRQ}^{T}},}"/></p>
</div><p>where Q is a normalised quaternion</p>
<div class="math" id="equation-pfx160">
<p><span class="eqno">(11.16)<a class="headerlink" href="#equation-pfx160" title="Permalink to this equation"></a></span><img src="../_images/math/f43199f0f8ee8586e9aff7f5404fa46368695552.png" alt="{\text{|}Q\text{|}^{2}\doteq{{q_{0}^{2} + q_{1}^{2} + q_{2}^{2} + q_{3}^{2}} = \frac{1}{4}}\mathit{tr}\text{\textbackslash\{}Q^{T}Q{\text{\textbackslash\}} = 1.}}"/></p>
</div><p>The symbol <em>tr</em> stands for ‘trace’. We note that a normalized quaternion
is represented by an <em>orthogonal</em> 4 x 4 matrix. <strong>R’</strong> may then be
written as</p>
<div class="math" id="equation-pfx161">
<p><span class="eqno">(11.17)<a class="headerlink" href="#equation-pfx161" title="Permalink to this equation"></a></span><img src="../_images/math/c39587d6fbbf87895a116b709d54c9cacec9c1b7.png" alt="{{R^{'} = x^{'}}\cdot{I + y^{'}}\cdot{J + z^{'}}\cdot K,}"/></p>
</div><p>where the components x’, y’, z’, abbreviated as r’, are given by</p>
<div class="math" id="equation-pfx162">
<p><span class="eqno">(11.18)<a class="headerlink" href="#equation-pfx162" title="Permalink to this equation"></a></span><img src="../_images/math/df4bd293e7d8e2c5db9444f9f6867c57c29d2d1f.png" alt="{{r^{'} = D}(q)r.}"/></p>
</div><p>The matrix <strong>D</strong>(<strong>q</strong>) is the rotation matrix defined in
<cite>95</cite>.</p>
<p><strong>Solution of the minimization problem</strong>. In quaternion algebra, the
rotational minimization problem may now be phrased as follows:</p>
<div class="math" id="equation-pfx163">
<p><span class="eqno">(11.19)<a class="headerlink" href="#equation-pfx163" title="Permalink to this equation"></a></span><img src="../_images/math/f2c29a8a75e0f10e808d7c7afdcf6f9e4fda4d56.png" alt="{m{(q) = {{\sum\limits_{\alpha}{{\omega_{\alpha}\text{|}\mathit{QR}}_{\alpha}^{(0)}Q}^{T}} - R_{\alpha}}}{\text{|}^{2}\overset{!}{=}\mathit{Min}}.}"/></p>
</div><p>Since the matrix Q representing a normalized quaternion is orthogonal
this may also be written as</p>
<div class="math" id="equation-pfx164">
<p><span class="eqno">(11.20)<a class="headerlink" href="#equation-pfx164" title="Permalink to this equation"></a></span><img src="../_images/math/8df4e1e2eaee2825477406969f6cb0abd875d744.png" alt="{{{m{(q) = {\sum\limits_{\alpha}\omega_{\alpha}}}\text{|}\mathit{QR}}_{\alpha}^{(0)} - R_{\alpha}}Q\text{|}^{2}{.\overset{!}{=}\mathit{Min}}.}"/></p>
</div><p>This follows from the simple fact that</p>
<div class="math" id="equation-pfx165">
<p><span class="eqno">(11.21)<a class="headerlink" href="#equation-pfx165" title="Permalink to this equation"></a></span><img src="../_images/math/33832ab760a37c1bbf01a345f1090c00afcffbc8.png" alt="{\text{|}A{\text{|} = \text{|}}\mathit{AQ}\text{|}}"/></p>
</div><p>, if Q is normalized. Eq. <cite>104</cite> shows that the
target function to be minimized can be written as a simple quadratic
form in the quaternion parameters [<a class="reference external" href="#SignetBibliographie_024">24</a>],</p>
<div class="math" id="equation-pfx166">
<p><span class="eqno">(11.22)<a class="headerlink" href="#equation-pfx166" title="Permalink to this equation"></a></span><img src="../_images/math/fb7e3ee23884e73033f3716085772e8f78c67122.png" alt="{m{(q) = q}\cdot\mathit{Mq},}"/></p>
</div><div class="math" id="equation-pfx167">
<p><span class="eqno">(11.23)<a class="headerlink" href="#equation-pfx167" title="Permalink to this equation"></a></span><img src="../_images/math/795422ef1605bdb876197a977b762f3230716de3.png" alt="{{M = {\sum\limits_{\alpha}{\omega_{\alpha}M_{\alpha}}}}.}"/></p>
</div><p>The matrices M_ are positive semi-definite matrices depending on the
positions <img class="math" src="../_images/math/60f25398fae5a2ca09130006f6613881ccea6821.png" alt="r_{\alpha}"/> and <img class="math" src="../_images/math/be744cb6c003824227ad37a0231b47e72e61b509.png" alt="r_{\alpha}^{(0)}"/>:</p>
<p><a class="reference internal" href="../_images/1000000000000226000000D8F0CF60C6C4938937.png"><img alt="image32" src="../_images/1000000000000226000000D8F0CF60C6C4938937.png" style="width: 13.123cm; height: 5.154cm;" /></a></p>
<p>The rotational fit is now reduced to the problem of finding the minimum
of a quadratic form with the constraint that the quaternion to be
determined must be normalized. Using the method of Lagrange multipliers
to account for the normalization constraint we have</p>
<div class="math" id="equation-pfx169">
<p><span class="eqno">(11.24)<a class="headerlink" href="#equation-pfx169" title="Permalink to this equation"></a></span><img src="../_images/math/a072b8d722cd746298746d028c56bc4d0845bf26.png" alt="{m^{'}{\left( {q,\lambda} \right) = q}\cdot{\mathit{Mq} - \lambda}{\left( {q\cdot{q - 1}} \right)\overset{!}{=}\mathit{Min}}.}"/></p>
</div><p>This leads immediately to the eigenvalue problem</p>
<div class="math" id="equation-pfx170">
<p><span class="eqno">(11.25)<a class="headerlink" href="#equation-pfx170" title="Permalink to this equation"></a></span><img src="../_images/math/b8f609781f95c49f192ef34cebd55e5016dd2a27.png" alt="{{\mathit{Mq} = \lambda}q,}"/></p>
</div><div class="math" id="equation-pfx171">
<p><span class="eqno">(11.26)<a class="headerlink" href="#equation-pfx171" title="Permalink to this equation"></a></span><img src="../_images/math/4bf9f4f3419b7cc5fd23d4082a764e4c3eb57122.png" alt="{q\cdot{q = 1.}}"/></p>
</div><p>Now any normalized eigenvector <strong>q</strong> fulfils the relation</p>
<div class="math" id="equation-pfx172">
<p><span class="eqno">(11.27)<a class="headerlink" href="#equation-pfx172" title="Permalink to this equation"></a></span><img src="../_images/math/dc6d950c4e8da7a20941367098744aa28e622ae0.png" alt="{{\lambda = q}\cdot\mathit{Mq}\equiv m(q)}"/></p>
</div><p>. Therefore, the eigenvector belonging to the smallest eigenvalue,
λ<sub>min</sub>, is the desired solution. At the same time λ<sub>min</sub>
gives the average error per atom. The result of <em>RBT</em> analysis is stored
in a new trajectory file that contains only <em>RBT</em> motions.</p>
<p id="gui-18">GUI</p>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000032200000275B155A2D4E67091F5.png"><img alt="../_images/100000010000032200000275B155A2D4E67091F5.png" src="../_images/100000010000032200000275B155A2D4E67091F5.png" style="width: 15.921cm; height: 12.487cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Group_coordinates_by">Group coordinates by</a></p></li>
<li><p><strong>reference</strong></p></li>
</ul>
<p><em>Format:</em> int</p>
<p><em>Default:</em> 0</p>
<p><em>Description:</em> the number of the frame that is used as reference.</p>
<ul class="simple">
<li><p><strong>remove translation</strong></p></li>
</ul>
<p><em>Format:</em> bool</p>
<p><em>Default:</em> False</p>
<p><em>Description:</em> &lt;insert&gt;</p>
<ul class="simple">
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
<section id="unfolded-trajectory">
<h3><span class="section-number">11.4.6. </span>Unfolded Trajectory<a class="headerlink" href="#unfolded-trajectory" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000031F0000018EC02857C67CB357DA.png"><img alt="../_images/100000010000031F0000018EC02857C67CB357DA.png" src="../_images/100000010000031F0000018EC02857C67CB357DA.png" style="width: 15.921cm; height: 7.93cm;" /></a>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><a class="reference external" href="#_Atom_Selection_1">atom selection</a></p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
</section>
</section>
<section id="virtual-instruments">
<h2><span class="section-number">11.5. </span>Virtual Instruments<a class="headerlink" href="#virtual-instruments" title="Permalink to this heading"></a></h2>
<section id="mcstas-virtual-instrument">
<h3><span class="section-number">11.5.1. </span>McStas Virtual Instrument<a class="headerlink" href="#mcstas-virtual-instrument" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<p><a class="reference internal" href="../_images/100000010000031F00000203A1B6C4356C211C30.png"><img alt="image33" src="../_images/100000010000031F00000203A1B6C4356C211C30.png" style="width: 15.921cm; height: 10.262cm;" /></a> <a class="reference internal" href="../_images/10000001000003220000018769B28972812F81A2.png"><img alt="image34" src="../_images/10000001000003220000018769B28972812F81A2.png" style="width: 15.921cm; height: 7.761cm;" /></a></p>
<ul class="simple">
<li><p><a class="reference external" href="#_Frames">frames</a></p></li>
<li><p><strong>MDANSE Coherent Structure Factor</strong></p></li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> ..\..\..\Data\NetCDF\dcsf_prot.nc</p>
<p><em>Description:</em> the path to a calculated Coherent Structure Factor. The
file must be in MMTK NetCDF file and should have been generated with
MDANSE’s Dynamic Coherent Structure Factor analysis &lt;link&gt;.</p>
<ul class="simple">
<li><p><strong>MDANSE Incoherent Structure Factor</strong></p></li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> ..\..\..\Data\NetCDF\disf_prot.nc</p>
<p><em>Description:</em> the path to a calculated Incoherent Structure Factor. The
file must be in MMTK NetCDF file and should have been generated with
MDANSE’s Dynamic Incoherent Structure Factor analysis &lt;link&gt;.</p>
<ul class="simple">
<li><p><strong>temperature</strong></p></li>
</ul>
<p><em>Format:</em> strictly positive float</p>
<p><em>Default:</em> 298.0</p>
<p><em>Description:</em> the temperature in Kelvin at which the MD simulation was
performed.</p>
<ul class="simple">
<li><p><strong>trace the 3D view of the simulation</strong></p></li>
</ul>
<p><em>Format:</em> bool</p>
<p><em>Default:</em> False</p>
<p><em>Description:</em> &lt;insert&gt;</p>
<ul class="simple">
<li><p><strong>mcstas instrument</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> None</p>
<p><em>Description:</em> &lt;insert&gt;</p>
<ul class="simple">
<li><p>mcstas options</p>
<ul>
<li><p><strong>ncount</strong></p></li>
</ul>
</li>
</ul>
<p><em>Format:</em> int</p>
<p><em>Default:</em> 10000</p>
<p><em>Description:</em> &lt;insert&gt;</p>
<ul class="simple">
<li><ul>
<li><p><strong>dir</strong></p></li>
</ul>
</li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> None</p>
<p><em>Description:</em> &lt;insert&gt;</p>
<ul class="simple">
<li><p>mcstas parameters - these options become visible once a McStas
instrument has been chosen.</p></li>
<li><p><a class="reference external" href="#_Output_files">output files</a></p></li>
<li><p><a class="reference external" href="#_Running_mode">running mode</a></p></li>
</ul>
<section id="miscellaneous">
<h4><span class="section-number">11.5.1.1. </span>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this heading"></a></h4>
<p>This section normally contains only one Plugin, which is present for
both trajectories and analysis results. However, some other Plugins
appear under certain circumstances.</p>
</section>
</section>
</section>
<section id="data-info">
<h2><span class="section-number">11.6. </span>Data info<a class="headerlink" href="#data-info" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>available for trajectories and analysis results</p></li>
</ul>
<p>This plugin opens a window containing an overview of the data stored in
the selected NetCDF file. For trajectory files, it might look like the
picture below, while it may not be able to read any data from an
analysis result. Generally, the following information should be included
for a trajectory:</p>
<ul class="simple">
<li><p>Location of the trajectory on disk</p></li>
<li><p>Number of time steps</p></li>
<li><p>Universe (the MMTK object)</p></li>
<li><p>Direct cell at the beginning</p></li>
<li><p>Reciprocal cell at the beginning</p></li>
<li><p>List of molecules</p></li>
<li><p>List of variables contained in the trajectory</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/100000010000025700000277AC41F1013CDDDC3D.png"><img alt="../_images/100000010000025700000277AC41F1013CDDDC3D.png" src="../_images/100000010000025700000277AC41F1013CDDDC3D.png" style="width: 11.441cm; height: 12.053cm;" /></a>
</section>
<section id="animation">
<h2><span class="section-number">11.7. </span>Animation<a class="headerlink" href="#animation" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>available for trajectories only</p></li>
<li><p>appears only when <a class="reference external" href="#_Molecular_Viewer">Molecular Viewer</a> is active</p></li>
</ul>
<p>Once double-clicked, it creates a new bar below Molecular Viewer that
allows you to watch the whole MD simulation.</p>
<a class="reference internal image-reference" href="../_images/10000001000004540000004B8ED7C35C8B494D1E.png"><img alt="../_images/10000001000004540000004B8ED7C35C8B494D1E.png" src="../_images/10000001000004540000004B8ED7C35C8B494D1E.png" style="width: 15.921cm; height: 1.078cm;" /></a>
<ul class="simple">
<li><p><strong>Skip to the beginning</strong> button (leftmost) sets the frame number (15
in the picture above) to 0.</p></li>
<li><p><strong>Play</strong> button starts the simulation at the speed determined by the
rightmost box (95 in the picture above)</p></li>
<li><p><strong>Skip to the end</strong> button (right of Play) sets the frame number to
the last frame in the trajectory.</p></li>
<li><p>The left sliding bar allows you to select any of the frames in the
trajectory. It displays the frame number by altering the Frame number
box to the left of itself.</p></li>
<li><p><strong>Frame number</strong> box allows you to view a frame by typing in its
index. Press enter to view the frame.</p></li>
<li><p>The right sliding bar allows you to alter the speed at which the
simulation is shown. It also shows the speed in the box to the left
of itself.</p></li>
<li><p><strong>Speed</strong> determines how fast the simulation is displayed. The higher
the number, the faster the playback.</p></li>
</ul>
</section>
<section id="density-superposition">
<h2><span class="section-number">11.8. </span>Density Superposition<a class="headerlink" href="#density-superposition" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>available for trajectories only</p></li>
<li><p>appears only when <a class="reference external" href="#_Molecular_Viewer">Molecular Viewer</a> is active
and you have left-clicked anywhere inside it</p></li>
</ul>
<p>Double-clicking this opens the following window:</p>
<a class="reference internal image-reference" href="../_images/100000010000011B00000149C792FEA0A3BBF869.png"><img alt="../_images/100000010000011B00000149C792FEA0A3BBF869.png" src="../_images/100000010000011B00000149C792FEA0A3BBF869.png" style="width: 6.168cm; height: 7.17cm;" /></a>
<ul class="simple">
<li><p><strong>Select file</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> None</p>
<p><em>Description:</em> first, a file has to be found using the <strong>Browse</strong>
button, and then it can be found in the drop-down menu. This file has to
be the result of <a class="reference external" href="#_Molecular_Trace">Molecular Trace</a> analysis.</p>
<ul class="simple">
<li><p><strong>Shape</strong></p></li>
</ul>
<p><em>Format:</em> str</p>
<p><em>Default:</em> loaded from file</p>
<p><em>Description:</em> cannot be edited.</p>
<ul class="simple">
<li><p><strong>Rendering mode</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> surface</p>
<p><em>Description:</em> determines the way in which the Density Superposition is
displayed.</p>
<ul class="simple">
<li><p><strong>Opacity level</strong></p></li>
</ul>
<p><em>Format:</em> float between 0 and 1</p>
<p><em>Default:</em> 0.5</p>
<p><em>Description:</em> the opacity/transparency of the Density Superposition.</p>
<ul class="simple">
<li><p><strong>Contour Level</strong></p></li>
</ul>
<p><em>Format:</em> sliding bar</p>
<p><em>Default:</em> 0</p>
<p><em>Description:</em> determines the level of detail?&lt;insert&gt;</p>
<ul class="simple">
<li><p><strong>Clear</strong> button removes the Density Superposition from <a class="reference external" href="#_Molecular_Viewer">Molecular
Viewer</a>.</p></li>
<li><p><strong>Draw</strong> button add Density Superposition on top of <a class="reference external" href="#_Molecular_Viewer">Molecular
Viewer</a>.</p></li>
</ul>
</section>
<section id="trajectory-viewer">
<h2><span class="section-number">11.9. </span>Trajectory Viewer<a class="headerlink" href="#trajectory-viewer" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Available for trajectories only</p></li>
<li><p>appears only when <a class="reference external" href="#_Molecular_Viewer">Molecular Viewer</a> is active</p></li>
</ul>
<p>This plugin was designed to help visualise the variables contained in a
trajectory. It can only plot the 3D trajectory variables, and nothing
else. It does this by separating the chosen 3D variable into its
constituent 1D parts and plotting those. This way, the x, y, or z
component of a chosen variable can be plotted for one atom against time.
Once it is double-clicked, the following window opens:</p>
<a class="reference internal image-reference" href="../_images/100000010000025700000213FCFF259FE25DE0B6.png"><img alt="../_images/100000010000025700000213FCFF259FE25DE0B6.png" src="../_images/100000010000025700000213FCFF259FE25DE0B6.png" style="width: 9.566cm; height: 8.453cm;" /></a>
<p>The plotting is controlled through the panel at the top, which is unique
to the Trajectory Viewer. The plot is visualised immediately after all
three fields are filled. It consists of these parameters:</p>
<ul class="simple">
<li><p><strong>Trajectory</strong></p></li>
</ul>
<p><em>Format</em>: drop-down</p>
<p><em>Default</em>: None</p>
<p><em>Description</em>: the variable that will be plotted. All 3D variables
present in the trajectory are available for plotting, meaning that
configuration (i.e., positions) can always be plotted, and velocities
and gradients if they are present.</p>
<ul class="simple">
<li><p><strong>Atom</strong></p></li>
</ul>
<p><em>Format:</em> positive int</p>
<p><em>Default:</em> 0</p>
<p><em>Description</em>: The atom for which the chosen variable will be plotted.
The number represents the index of the atom in the trajectory. The
arrows next to this box can be used to navigate the atoms one by one. If
a number larger than the number of atoms is inputted, the last atom will
instead be selected.</p>
<ul class="simple">
<li><p><strong>Dimension</strong></p></li>
</ul>
<p><em>Format:</em> drop-down</p>
<p><em>Default:</em> None</p>
<p><em>Description:</em> the spatial component of the selected variable which will
be plotted. For example, the change in position of a specific atom along
the x-axis over time can be plotted. The x, y, and z components of the
‘variable’ vectors are available for plotting.</p>
<p>The menu at the bottom of the plotter is identical to the one used in
<a class="reference external" href="#_Toolbar_1">Line Plotter</a>, and so the description of its function
can be found there. However, there is some difference in that; at the
very bottom of the Trajectory Viewer window are three options which work
differently here:</p>
<ul class="simple">
<li><p><strong>Clear</strong> button removes all the lines from the plot.</p></li>
<li><p><strong>Plot on same figure</strong></p></li>
</ul>
<p><em>Format:</em> Bool</p>
<p><em>Default:</em> False</p>
<p><em>Description:</em> controls the number of lines that can be plotted
simultaneously.</p>
<p>When it’s unticked (i.e., False) only one line can be plotted at a time.
Therefore, when a line is already plotted and any change is made in the
topmost toolbar, the current line is replaced by the new selection.</p>
<p>When it’s ticked (i.e., True), any number of lines can be plotted.
Therefore, when a line is already plotted and any change is made in the
topmost toolbar, a new line is added.</p>
<ul class="simple">
<li><p><strong>Show legend</strong></p></li>
</ul>
<p><em>Format:</em> Bool</p>
<p><em>Default:</em> False</p>
<p><em>Description:</em> Toggles the legend. When False, the legend is hidden.
When True, the legend appears in the location matplotlib determines as
‘best’.</p>
<p>This section only appears if you have used the <a class="reference external" href="#save_analysis_template">Save analysis
template</a> button in the main window’s
toolbar. It contains all the analyses created this way and allows them
to be run.</p>
</section>
<section id="d-3d-plotter">
<span id="d3d-plotter-1"></span><h2><span class="section-number">11.10. </span>2D/3D Plotter<a class="headerlink" href="#d-3d-plotter" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>available for analysis results only</p></li>
</ul>
<p>Launches the 2D/3D Plotter inside the current tab of the working panel,
like below. For more information, please see <a class="reference external" href="#_2D/3D_Plotter">2D/3D
Plotter</a>.</p>
<a class="reference internal image-reference" href="../_images/1000000100000456000001F7F9358DAEDACCE259.png"><img alt="../_images/1000000100000456000001F7F9358DAEDACCE259.png" src="../_images/1000000100000456000001F7F9358DAEDACCE259.png" style="width: 15.921cm; height: 7.214cm;" /></a>
<p>This section contains all the
definitions/<a class="reference external" href="#_Creating_selections">selections</a> that have been made
for the selected NetCDF file, serving similar purpose to <a class="reference external" href="#user_definitions_editor">User
definition editor</a>.</p>
</section>
<section id="molecular-viewer">
<h2><span class="section-number">11.11. </span>Molecular Viewer<a class="headerlink" href="#molecular-viewer" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>available for trajectories only</p></li>
</ul>
<p>Double-clicking on this option opens the Molecular Viewer plugin inside
the current tab of the <a class="reference external" href="#_Working_panel">Working panel</a>. This shows a
simulated 3D view of the first frame of the trajectory. The Viewer can
be interacted with by dragging the simulation and zooming in/out. It can
be closed using the x button in the top right corner:</p>
<a class="reference internal image-reference" href="../_images/1000000100000454000001F6A0725729E476539D.png"><img alt="../_images/1000000100000454000001F6A0725729E476539D.png" src="../_images/1000000100000454000001F6A0725729E476539D.png" style="width: 15.921cm; height: 7.213cm;" /></a>
<p>Clicking on an atom highlights it and prints out some basic information
about it in the Logger&lt;link&gt;. More options are available by
right-clicking anywhere inside the Molecular Viewer, which brings up the
following menu:</p>
<a class="reference internal image-reference" href="../_images/10000001000000E30000009A5B85D15F6882D700.png"><img alt="../_images/10000001000000E30000009A5B85D15F6882D700.png" src="../_images/10000001000000E30000009A5B85D15F6882D700.png" style="width: 6.008cm; height: 4.075cm;" /></a>
<ul class="simple">
<li><p><strong>Rendering</strong> brings up a menu of rendering options when hovered over
or clicked. These change the way the system is displayed and should
both self-explanatory and familiar from other molecular visualisation
software.</p></li>
<li><p><strong>Show/hide selection box</strong> creates a box around the whole system.
This disables your ability to move and rotate the system, but instead
you can move the faces of the box by dragging the large balls.
Everything inside the box is highlighted and considered selected.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/1000000100000456000001F44A4E1623C2FD5291.png"><img alt="../_images/1000000100000456000001F44A4E1623C2FD5291.png" src="../_images/1000000100000456000001F44A4E1623C2FD5291.png" style="width: 15.921cm; height: 7.172cm;" /></a>
<ul class="simple">
<li><p><strong>Save selection</strong> opens a window prompting you to enter a selection
name. Once that is done and OK is pressed, the selection will be
saved for the current trajectory using the atoms that have been
selected by either clicking on them or with the selection box above.</p></li>
<li><p><strong>Clear selection</strong> unselects all the selected atoms. It does not
hide the selection box, so interacting with it will once again select
all the atoms inside it.</p></li>
<li><p><strong>Parallel projection</strong> toggles on/off trimetric parallel projection
of the camera. According to Wikipedia
[<a class="reference external" href="#SignetBibliographie_026">26</a>], this means that three axes of
space should appear unequally foreshortened. The scale along each of
the three axes and the angles among them are determined separately as
dictated by the angle of viewing.</p></li>
<li><p><strong>Show/hide bounding box</strong> shows/hides the simulation box within
which the system is bound.</p></li>
</ul>
<p>When an analysis is started by clicking on the Run button, it appears as
a job in this panel, like so:</p>
<a class="reference internal image-reference" href="../_images/10000001000007800000004AA7F683E25A4E52BB.png"><img alt="../_images/10000001000007800000004AA7F683E25A4E52BB.png" src="../_images/10000001000007800000004AA7F683E25A4E52BB.png" style="width: 15.921cm; height: 0.614cm;" /></a>
<ol class="arabic simple">
<li><p><strong>NAME</strong> field shows the unique name MDANSE assigned to the job. It
is also a button which shows the options that were selected for the
analysis:</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/10000001000002A20000012C4E87306FF6F6DC3C.png"><img alt="../_images/10000001000002A20000012C4E87306FF6F6DC3C.png" src="../_images/10000001000002A20000012C4E87306FF6F6DC3C.png" style="width: 8.671cm; height: 3.859cm;" /></a>
<ol class="arabic simple">
<li><p><strong>PID</strong> field shows the process ID assigned by the operating system
to the job process.</p></li>
<li><p><strong>START</strong> field shows the exact date and time when this job was
started.</p></li>
<li><p><strong>ELAPSED</strong> field shows the time elapsed since the start of the job.</p></li>
<li><p><strong>STATE</strong> field shows the state of the job. This can be ‘running’,
indicating that MDANSE is in the process of performing the job,
‘finished’, indicating that the job was completed successfully, and
‘aborted’, indicating that the job failed due to an error. This field
is also a button which shows the traceback to the error that caused
the failure when clicked. This should provide all the information to
either correct your mistake or to inform us of a bug. When <a class="reference external" href="#_Toolbar">reporting
a bug</a>, please copy the entire traceback from here.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/100000010000077E00000029ED03FC61583BB04B.png"><img alt="../_images/100000010000077E00000029ED03FC61583BB04B.png" src="../_images/100000010000077E00000029ED03FC61583BB04B.png" style="width: 15.921cm; height: 0.34cm;" /></a>
<ol class="arabic simple">
<li><p><strong>PROGRESS</strong> field approximately shows the progress of the job. This
is not perfect, so it is not unusual if it appears to get stuck for a
long time, especially with large files. When that happens, it is
likely that MDANSE is performing a large and computationally
intensive stage. MDANSE performs jobs in four stages: initialisation,
run, combination, and finalisation. Of these, only the run stage is
composed of many steps, after each of which the progress bar is
updated. Of the other stages, any can be very computationally
intensive yet for them the bar is updated only at the beginning and
end of the stage.</p></li>
<li><p><strong>ETA</strong> field shows the estimated time until the completion of the
job. Similar to the progress field, this is not entirely accurate,
but it is a good rough estimate.</p></li>
<li><p><strong>KILL</strong> field contains a button that allows for the cancellation of
the job. This causes the job to be removed from this Jobs panel,
making space, visually, for more job. If the job was running when it
was killed, it will be stopped and no output file will be created.
First though, the button will make a notification prompt to appear,
asking if you are sure you want to kill the job.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/100000010000025C000000B1ACE43AF975D440AC.png"><img alt="../_images/100000010000025C000000B1ACE43AF975D440AC.png" src="../_images/100000010000025C000000B1ACE43AF975D440AC.png" style="width: 7.666cm; height: 2.245cm;" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="structure.html" class="btn btn-neutral float-left" title="10. Analysis: Structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmd.html" class="btn btn-neutral float-right" title="12. Using MDANSE from command line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015, Gael Goret, Bachir Aoun and Eric C. Pellegrini.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>